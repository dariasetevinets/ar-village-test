<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR Postcards A5</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <script>

    AFRAME.registerComponent('postcard-align', {
      schema: {
        anchor: { type: 'string', default: 'bottom-right' }
      },
      update: function () {
        setTimeout(() => {
          const width = parseFloat(this.el.getAttribute('width')) || 1;
          const height = parseFloat(this.el.getAttribute('height')) || 1;
          const anchor = this.data.anchor;
          
          const pos = { x: 0, y: 0 };
          
          switch (anchor) {
            case 'bottom-right':
              pos.x = -width / 2;
              pos.y = height / 2;
              break;
            case 'bottom-left':
              pos.x = width / 2;
              pos.y = height / 2;
              break;
            case 'top-right':
              pos.x = -width / 2;
              pos.y = -height / 2;
              break;
            case 'top-left':
              pos.x = width / 2;
              pos.y = -height / 2;
              break;
            case 'center':
            default:
              pos.x = 0;
              pos.y = 0;
          }

          this.el.setAttribute('position', `${pos.x} ${pos.y} 0.01`);
        }, 0); // сдвиг на следующий event loop
      }
    });
  </script>

</head>
<body style="margin: 0; overflow: hidden">
  <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
    <a-assets>
      <img id="drawing1" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-1.png" crossorigin="anonymous">
      <img id="drawing2" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-2.png" crossorigin="anonymous">
      <img id="drawing3" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-3.png" crossorigin="anonymous">
      <img id="drawing4" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-4.png" crossorigin="anonymous">
      <img id="drawing5" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-5.png" crossorigin="anonymous">
      <img id="drawing6" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-6.png" crossorigin="anonymous">
      <img id="drawing7" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-7.png" crossorigin="anonymous">
      <img id="drawing8" src="https://dariasetevinets.github.io/ar-village-test/assets/drawings/setevinets_index-8.png" crossorigin="anonymous">
    </a-assets>

    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-1.patt" size="0.05" emitevents="true" data-name="index 1">
      <a-image
        src="#drawing1"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>
    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-2.patt" size="0.05" emitevents="true" data-name="index 2">
      <a-image
        src="#drawing2"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>
    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-3.patt" size="0.05" emitevents="true" data-name="index 3">
      <a-image
        src="#drawing3"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>
    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-4.patt" size="0.05" emitevents="true" data-name="index 4">
      <a-image
        src="#drawing4"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>
    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-5.patt" size="0.05" emitevents="true" data-name="index 5">
      <a-image
        src="#drawing5"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>
    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-6.patt" size="0.05" emitevents="true" data-name="index 6">
      <a-image
        src="#drawing6"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>
    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-7.patt" size="0.05" emitevents="true" data-name="index 7">
      <a-image
        src="#drawing7"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>
    <a-marker type="pattern" url="https://dariasetevinets.github.io/ar-village-test/assets/patterns/sdxtp-8.patt" size="0.05" emitevents="true" data-name="index 8">
      <a-image
        src="#drawing8"
        width="0.21"
        height="0.148"
        postcard-align="anchor: bottom-right"
        rotation="-90 0 0"
        material="transparent: true; alphaTest: 0.1; shadow: cast"
      ></a-image>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>
</body>
</html>
